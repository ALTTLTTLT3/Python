"""This is the search sub feature in customer feature .
Customer will be able to search a product or a category and see all the details of the said product or category"""

# Student Name-Tahmida Lotif Tarin
# Id-001125724

from tkinter import *
import sqlite3
root = Tk()

root.title('Search Window')

root.geometry('300x200')
root.iconphoto(False,
               PhotoImage(file='toys.png'))


def product():
    conn = sqlite3.connect('db.db')
    c = conn.cursor()
    name = product_entry.get()

    row = c.execute("SELECT ID, Name, Stock, Price, Category FROM Toys WHERE Name =? or Category=?",(name,),).fetchall()

    if not row:
        search_product_label = Label(root, text='No such product')
        search_product_label.pack()
    else:
        search_product_label = Label(root, text=row)
        search_product_label.pack()

    conn.commit()
    c.close()
    conn.close()
    product_entry.delete(0, END)


def category():
    conn = sqlite3.connect('db.db')
    c = conn.cursor()
    cat = category_entry.get()

    rows = c.execute("SELECT ID, Name, Stock, Price, Category FROM Toys WHERE Category =?",(cat,),).fetchall()

    if not rows:
        search_category_label = Label(root, text='No such category')
        search_category_label.pack()
    else:
        search_category_label = Label(root, text=rows)
        search_category_label.pack()

    conn.commit()
    c.close()
    conn.close()

    category_entry.delete(0, END)


'''def stock():
    conn = sqlite3.connect('db.db')
    c = conn.cursor()
    item = stock_entry.get()

    rows = c.execute("SELECT Stock FROM Toys WHERE Name =?",(item,),).fetchall()

    if rows == 0:
        search_category_label = Label(root, text='Out of Stock')
        search_category_label.pack()
    if 0 < rows < 20:
        search_category_label = Label(root, text='Low Stock')
        search_category_label.pack()
    if rows >= 20:
        search_category_label = Label(root, text='In Stock')
        search_category_label.pack()

    search_category_label= Label(root, text=rows)
    search_category_label.pack()


    conn.commit()
    c.close()
    conn.close()'''

label1 = Label(root, text='Search a Product')
label1.pack()
product_entry = Entry(root, width=30)
product_entry.pack()
search_product = Button(root, text='Search', command=product)
search_product.pack()


label2 = Label(root, text='Search a Category')
label2.pack()
category_entry = Entry(root, width=30)
category_entry.pack()
search_category = Button(root, text='Search', command=category)
search_category.pack()

'''label3 = Label(root, text='Check Stock')
label3.pack()
stock_entry = Entry(root, width=30)
stock_entry.pack()
search_stock = Button(root, text='Search', command=stock)
search_stock.pack()'''

mainloop()
